# AUTOCOPASI: Automated Batch Simulation for Microkinetic Modeling

This subdirectory contains the second stage of the SPECI-AUTOCOPASI workflow, specifically designed to run batch simulations using COPASI. The workflow is automated to take CSV-formatted reaction and species data (generated by the SPECI module) and simulate them across a range of initial conditions or kinetic parameters.

This component is **independent of the SPECI environment** and is distributed under the **MIT License** to encourage flexibility and reuse.

---

## 📁 Directory Structure

```
autocopasi/
├── auto-MKM.py      # Main driver script for batch simulation
├── environment.yml         # Conda environment definition for AUTOCOPASI
└── README.md               # You're here!
```

---

## ⚙️ Conda Environment Setup

AUTOCOPASI uses a separate environment from SPECI. Set it up as follows:

### 🧪 Step 1: Create the environment

```bash
conda env create -f environment.yml
```

### 🧬 Step 2: Activate the environment

```bash
conda activate autocopasi-env
```

---

## 🚀 How to Run

After activating the environment:

```bash
python autocopasi_main.py --input inputs/reactions.csv --output results/
```

Options may include:

- `--input` : path to the CSV file describing reactions and species
- `--template` : path to a COPASI template file
- `--output` : output directory for simulation results

Refer to comments in `autocopasi_main.py` for full CLI options.

---

## 🧪 Key Features

- 🔄 Batch simulations using parameter sweep or different initial conditions
- 📊 Output saved in CSV or COPASI-readable format
- ⚙️ Works with standard COPASI `.cps` files and CSV-formatted input
- 🧩 Modular functions for integration into larger automation pipelines

---

## 📦 Dependencies

The `environment.yml` includes:

- `python >= 3.10`
- `pandas`
- `numpy`
- `lxml` (for editing COPASI XML structures)
- `click` (for command-line interfaces)

---

## 📄 License

This module is released under the [MIT License](https://opensource.org/license/mit/).

You are free to use, modify, and distribute this software with or without attribution, as long as the license terms are preserved in derivative works.

---

## 🧠 Notes

This tool assumes you have **COPASI installed on your system**. You can download it from:

[https://copasi.org/Download](https://copasi.org/Download)

Make sure `CopasiSE` (the command-line COPASI engine) is in your system `PATH`.

---

## 🧬 Integration with SPECI

Although this module can be used independently, it is designed to **take output from the SPECI system** (in the form of `reaction_data.csv`) and run simulations in a fully automated fashion.

This enables a full speciation → kinetic modeling → simulation pipeline across many systems.
The input for COPASI is a csv containing all the elementary reactions and their energies, generated driectly via main SPECI script.
